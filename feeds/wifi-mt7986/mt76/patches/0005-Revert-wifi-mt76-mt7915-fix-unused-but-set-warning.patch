From 225debbc6f0b3ecc50b71d2cadb9e9d9dc3f76a6 Mon Sep 17 00:00:00 2001
From: Brett Mastbergen <brettm@minim.com>
Date: Thu, 2 Mar 2023 11:14:48 -0500
Subject: [PATCH 5/7] Revert "wifi: mt76: mt7915: fix unused-but-set warning"

This reverts commit e7a9f7a0440c828075166e36ea28381b0889ebed.
---
 mt7915/mac.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/mt7915/mac.c b/mt7915/mac.c
index 07d425ec..97a19bdb 100644
--- a/mt7915/mac.c
+++ b/mt7915/mac.c
@@ -252,6 +252,7 @@ mt7915_wed_check_ppe(struct mt7915_dev *dev, struct mt76_queue *q,
 {
 	struct ieee80211_vif *vif;
 	struct wireless_dev *wdev;
+	u32 hash, reason;
 
 	if (!msta || !msta->vif)
 		return;
@@ -268,9 +269,9 @@ mt7915_wed_check_ppe(struct mt7915_dev *dev, struct mt76_queue *q,
 	wdev = ieee80211_vif_to_wdev(vif);
 	skb->dev = wdev->netdev;
 
-	mtk_wed_device_ppe_check(&dev->mt76.mmio.wed, skb,
-				 FIELD_GET(MT_DMA_PPE_CPU_REASON, info),
-				 FIELD_GET(MT_DMA_PPE_ENTRY, info));
+	reason = FIELD_GET(MT_DMA_PPE_CPU_REASON, info);
+	hash = FIELD_GET(MT_DMA_PPE_ENTRY, info);
+	mtk_wed_device_ppe_check(&dev->mt76.mmio.wed, skb, reason, hash);
 }
 
 static int
-- 
2.30.2

